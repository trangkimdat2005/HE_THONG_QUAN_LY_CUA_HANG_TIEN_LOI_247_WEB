@using HE_THONG_QUAN_LY_CUA_HANG_TIEN_LOI_247_WEB.Models.Entities;

@{
    ViewData["title"] = "Chi Tiết Hóa Đơn";
    var hoaDon = ViewData["HoaDon"] as HoaDon;
}
  <!-- Css riêng ở đây nha -->
<link rel="stylesheet" href="~/assets/css/XemChiTietDonHang.css">

  <main class="app-content">
    <div class="app-title">
      <div>
        <h1><i class="bi bi-receipt"></i> Chi Tiết Đơn Hàng</h1>
        <p>Thông tin chi tiết của hoá đơn @hoaDon?.Id</p>
      </div>
      <ul class="app-breadcrumb breadcrumb side">
        <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
        <li class="breadcrumb-item"><a asp-controller="QuanLyDonHang" asp-action="DanhSachDonHang">Danh Sách Đơn Hàng</a></li>
        <li class="breadcrumb-item active">
          <a asp-controller="QuanLyDonHang" asp-action="XemChiTietHoaDon" title="Xem chi tiết">Chi tiết đơn hàng</a>
        </li>
      </ul>
    </div>

    @if (hoaDon != null)
    {
      <div class="row">
        <div class="col-md-12">
          <div class="tile">
            <div class="tile-title-w-btn d-flex justify-content-between align-items-center">
              <h3 class="title">Hoá đơn: @hoaDon.Id</h3>
              <a class="btn btn-primary btn-add-khoi" href="#" onclick="window.print();">
                <i class="fas fa-print"></i> In hoá đơn
              </a>
            </div>
            
            <div class="tile-body">
              <div class="row info-section">
                <div class="col-md-6">
                  <h5>Thông tin Khách hàng</h5>
                  <p><strong>Mã Khách Hàng:</strong> @hoaDon.KhachHangId</p>
                </div>
                <div class="col-md-6">
                  <h5>Thông tin Đơn hàng</h5>
                  <p><strong>Mã Hoá Đơn:</strong> @hoaDon.Id</p>
                  <p><strong>Ngày Lập:</strong> @hoaDon.NgayLap.ToString("dd/MM/yyyy HH:mm")</p>
                  <p><strong>Mã Nhân Viên:</strong> @hoaDon.NhanVienId</p>
                  <p>
                    <strong>Trạng Thái:</strong>
                    @{
                      var statusClass = hoaDon.TrangThai == "DaThanhToan" ? "bg-success" 
                                      : hoaDon.TrangThai == "ChuaThanhToan" ? "bg-warning" 
                                      : "bg-danger";
                      var statusText = hoaDon.TrangThai == "DaThanhToan" ? "Đã Thanh Toán" 
                                     : hoaDon.TrangThai == "ChuaThanhToan" ? "Chưa Thanh Toán" 
                                     : "Đã Hủy";
                    }
                    <span class="badge @statusClass">@statusText</span>
                  </p>
                </div>
              </div>
              
              <hr>

              <div class="row total-section">
                <div class="col-md-12 text-end">
                  <h3 class="fw-bold">Tổng Cộng: <span class="text-primary">@(hoaDon.TongTien?.ToString("N0") ?? "0") đ</span></h3>
                </div>
              </div>

              <div class="mt-3">
                <a class="btn btn-secondary" asp-controller="QuanLyDonHang" asp-action="DanhSachDonHang">
                  <i class="fas fa-arrow-left"></i> Quay lại danh sách
                </a>
              </div>

            </div>
          </div>
        </div>
      </div>
    }
    else
    {
      <div class="row">
        <div class="col-md-12">
          <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle me-2"></i>
            Không tìm thấy thông tin hóa đơn.
          </div>
          <a class="btn btn-secondary" asp-controller="QuanLyDonHang" asp-action="DanhSachDonHang">
            <i class="fas fa-arrow-left"></i> Quay lại danh sách
          </a>
        </div>
      </div>
    }
  </main>








