@using HE_THONG_QUAN_LY_CUA_HANG_TIEN_LOI_247_WEB.Models.Entities;

@{
    ViewData["title"] = "Thêm Tài Khoản";

    var loai = ViewBag.LoaiTaiKhoan ?? "nhanvien";
    var nvChecked = (loai == "nhanvien") ? "checked" : "";
    var khChecked = (loai == "khachhang") ? "checked" : "";
}
<!-- Css riêng ở đây nha -->
<link rel="stylesheet" href="~/assets/lib/select2/dist/css/select2.min.css">
<link rel="stylesheet" href="~/assets/css/ThemTaiKhoan.css">


<!-- Main sidebar ở đây nha -->

<main class="app-content">
    <div class="app-title">
        <div>
            <h1><i class="bi bi-person-lock"></i> Thêm Tài Khoản Mới</h1>
            <p>Tạo tài khoản truy cập cho nhân viên hoặc khách hàng</p>
        </div>
        <ul class="app-breadcrumb breadcrumb">
            <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
            <li class="breadcrumb-item"><a>Quản lý bảo mật</a></li>
            <li class="breadcrumb-item"><a asp-controller="QuanLyBaoMat" asp-action="DanhSachTaiKhoanNhanVien">Danh sách tài khoản nhân viên</a></li>
            <li class="breadcrumb-item"><a asp-controller="Them" asp-action="ThemTaiKhoan">Tạo tài khoản</a></li>
        </ul>
    </div>

    <div class="row">
        <div class="col-md-10 mx-auto">
            <div class="tile">
                <h3 class="tile-title">Thông tin Tài Khoản</h3>
                <div class="tile-body">
                    <form id="form-them-tai-khoan">

                        <div class="mb-3">
                            <label class="form-label">Loại tài khoản</label>
                            <div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="accountType" id="radio-nhan-vien" value="NhanVien" @nvChecked disabled>
                                    <label class="form-check-label" for="radio-nhan-vien">Tài khoản Nhân viên</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="accountType" id="radio-khach-hang" value="KhachHang" @khChecked disabled>
                                    <label class="form-check-label" for="radio-khach-hang">Tài khoản Khách hàng</label>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3" id="field-chon-nhan-vien">
                            <label class="form-label">Chọn Nhân Viên</label>
                            <select class="form-control" id="select-nhan-vien" style="width: 100%;">
                                <option value="">-- Chọn nhân viên chưa có tài khoản --</option>
                                @{
                                    if (ViewData["lstNhanVien"] != null)
                                    {
                                        List<NhanVien> nvs = ViewBag.lstNhanVien;
                                        foreach (var nv in nvs)
                                        {
                                            <option value="@nv.Id" data-email="@nv.Email">@nv.HoTen (@nv.ChucVu)</option>

                                        }
                                    }
                                }
                            </select>
                        </div>

                        <div class="mb-3 form-field-hidden" id="field-chon-khach-hang">
                            <label class="form-label">Chọn Khách Hàng</label>
                            <select class="form-control" id="select-khach-hang" style="width: 100%;">
                                <option value="">-- Chọn khách hàng chưa có tài khoản --</option>
                                @{
                                    if (ViewData["lstKhachHang"] != null)
                                    {
                                        List<KhachHang> khs = ViewBag.lstKhachHang;
                                        foreach (var kh in khs)
                                        {
                                            <option value="@kh.Id" data-email="@kh.Email">@kh.HoTen (@kh.SoDienThoai)</option>
                                        }
                                    }
                                }
                            </select>
                        </div>

                        <hr>
                        <h5 class="mb-3">Thông tin đăng nhập</h5>

                        <div class="mb-3">
                            <label class="form-label">Tên đăng nhập</label>
                            <input class="form-control" type="text" id="TenDangNhap" placeholder="V.d: vana, thib~">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input class="form-control" type="email" id="input-email" placeholder="Email sẽ tự động điền khi chọn người dùng" readonly>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Mật khẩu</label>
                                    <input class="form-control" type="password" id="MatKhau">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Xác nhận Mật khẩu</label>
                                    <input class="form-control" type="password" id="XacNhanMatKhau">
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Trạng thái</label>
                            <select class="form-select" id="select-trang-thai">
                                <option value="Hoạt động">Hoạt động</option>
                                <option value="Không hoạt động">Không hoạt động</option>
                                <option value="Đã khoá">Đã khoá</option>
                            </select>
                        </div>

                        <div class="mb-3" id="field-chon-vai-tro">
                            <label class="form-label">Gán Vai Trò (Roles)</label>
                            <select class="form-control" id="select-roles" multiple="multiple" style="width: 100%;">
                                @{
                                    if (ViewData["lstRole"] != null)
                                    {
                                        List<Role> roles = ViewBag.lstRole;
                                        foreach (var role in roles)
                                        {
                                            <option value="@role.Id">@role.Ten</option>
                                        }
                                    }
                                }
                            </select>
                        </div>

                    </form>
                </div>
                <div class="tile-footer">
                    <button class="btn btn-primary" type="button" id="btn-luu-tai-khoan">
                        <i class="bi bi-check-circle-fill me-2"></i>Tạo tài
                        khoản
                    </button>
                    <a class="btn btn-secondary" href="#"><i class="bi bi-x-circle-fill me-2"></i>Huỷ</a>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- js riêng ở đây nha! -->
<script src="~/assets/lib/select2/dist/js/select2.full.min.js"></script>
<script src="~/assets/js/ThemTaiKhoan.js" asp-append-version="true" defer></script>