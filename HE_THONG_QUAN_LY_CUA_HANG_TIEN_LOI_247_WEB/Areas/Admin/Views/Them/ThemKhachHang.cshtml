@using HE_THONG_QUAN_LY_CUA_HANG_TIEN_LOI_247_WEB.Models.Entities;

@{
    ViewData["title"] = "Thêm Khách Hàng";
    var hinhAnhs = ViewData["DanhSachHinhAnh"] as List<HinhAnh> ?? new List<HinhAnh>();
}

<link rel="stylesheet" href="~/assets/lib/select2/dist/css/select2.min.css">
<link rel="stylesheet" href="~/assets/css/ThemKhachHang.css">

<main class="app-content">
    <div class="app-title">
        <div>
            <h1><i class="bi bi-person-plus-fill"></i> Thêm Khách Hàng Mới</h1>
            <p>Thêm thông tin khách hàng và tạo thẻ thành viên</p>
        </div>
        <ul class="app-breadcrumb breadcrumb">
            <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
            <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="QuanLyKhachHang" asp-action="DanhSachKhachHang">Quản lý khách hàng</a></li>
            <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="Them" asp-action="ThemKhachHang">Thêm khách hàng</a></li>
        </ul>
    </div>

    <div class="row">
        <!-- Single centered column -->
        <div class="col-md-8 col-lg-6 mx-auto">
            <div class="tile">
                <h3 class="tile-title">Thông tin Khách Hàng</h3>
                <p>Dữ liệu sẽ được lưu vào bảng.</p>
                <div class="tile-body">
                    <form id="form-khach-hang">
                        
                        <div class="avatar-upload-container text-center mb-4">
                            <img class="avatar-preview rounded-circle" id="avatarPreview" 
                                 src="https://placehold.co/150x150/EEE/31343C?text=Avatar"
                                 alt="Avatar" style="width: 150px; height: 150px; object-fit: cover;">
                            <input class="avatar-edit-input d-none" type="file" id="avatarUpload" accept=".png, .jpg, .jpeg">
                            <label class="btn btn-sm btn-primary mt-2" for="avatarUpload">
                                <i class="bi bi-camera-fill me-2"></i>Chọn ảnh
                            </label>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Họ và tên <span class="text-danger">*</span></label>
                            <input class="form-control" type="text" id="ho-ten" placeholder="V.d: Nguyễn Văn B" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Giới tính <span class="text-danger">*</span></label>
                            <div class="mt-2">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gioiTinh" id="radioNam" value="true" checked>
                                    <label class="form-check-label" for="radioNam">Nam</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gioiTinh" id="radioNu" value="false">
                                    <label class="form-check-label" for="radioNu">Nữ</label>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Số điện thoại <span class="text-danger">*</span></label>
                            <input class="form-control" type="tel" id="so-dien-thoai" placeholder="V.d: 0901234567" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input class="form-control" type="email" id="email" placeholder="V.d: example@email.com">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Địa chỉ <span class="text-danger">*</span></label>
                            <input class="form-control" type="text" id="dia-chi" placeholder="V.d: 456 Lê Lợi, Q.3, TP.HCM" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Ngày đăng ký <span class="text-danger">*</span></label>
                            <input class="form-control" type="date" id="ngay-dang-ky" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Trạng thái</label>
                            <select class="form-select" id="trang-thai">
                                <option value="Active" selected>Active (Hoạt động)</option>
                                <option value="Inactive">Inactive (Không hoạt động)</option>
                            </select>
                        </div>

                        <hr>

                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="toggle-membership-form">
                                <label class="form-check-label" for="toggle-membership-form">
                                    <strong>Mở Thẻ Thành Viên</strong>
                                </label>
                            </div>
                        </div>

                        <!-- Thẻ thành viên inline -->
                        <div id="membership-form-container" style="display: none;">
                            <hr>
                            <h5 class="mb-3">Thông tin Thẻ Thành Viên</h5>
                            
                            <div class="mb-3">
                                <label class="form-label">Hạng thẻ</label>
                                <select class="form-select" id="hang-the">
                                    <option value="Bronze" selected>Bronze (Đồng)</option>
                                    <option value="Silver">Silver (Bạc)</option>
                                    <option value="Gold">Gold (Vàng)</option>
                                    <option value="Platinum">Platinum (Bạch Kim)</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Điểm tích luỹ ban đầu</label>
                                <input class="form-control" type="number" id="diem-tich-luy" value="0" min="0">
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Ngày cấp thẻ</label>
                                <input class="form-control" type="date" id="ngay-cap-the">
                            </div>
                        </div>

                    </form>
                </div>
                
                <!-- Footer buttons inside tile -->
                <div class="tile-footer text-end">
                    <a class="btn btn-secondary" asp-area="Admin" asp-controller="QuanLyKhachHang" asp-action="DanhSachKhachHang">
                        <i class="bi bi-x-circle-fill me-2"></i>Huỷ
                    </a>
                    <button class="btn btn-primary" type="button" id="btn-luu">
                        <i class="bi bi-check-circle-fill me-2"></i>Lưu thông tin
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- js riêng ở đây nha! -->
<script src="~/assets/js/ThemKhachHang.js" asp-append-version="true" defer></script>
