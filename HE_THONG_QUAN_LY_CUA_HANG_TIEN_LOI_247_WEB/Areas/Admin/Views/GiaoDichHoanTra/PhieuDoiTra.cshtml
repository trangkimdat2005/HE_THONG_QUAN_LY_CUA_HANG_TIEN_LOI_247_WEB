@using HE_THONG_QUAN_LY_CUA_HANG_TIEN_LOI_247_WEB.Models.Entities;

@{

    ViewData["title"] = "Phiếu đổi trả";
}


<main class="app-content">
    <div class="app-title">
        <div>
            <h1><i class="bi bi-arrow-left-right"></i> Quản lý Đổi Trả</h1>
            <p>Danh sách các phiếu đổi trả hàng của khách</p>
        </div>
        <ul class="app-breadcrumb breadcrumb side">
            <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
            <li class="breadcrumb-item">Giao dịch & hoàn trả</li>
            <li class="breadcrumb-item active"><a href="#">Phiếu đổi trả</a></li>
        </ul>
    </div>

    <div id="section-list">
        <div class="row">
            <div class="col-md-12">
                <div class="tile">
                    <div class="tile-title-w-btn d-flex justify-content-between align-items-center">
                        <h3 class="title" style="margin-bottom: 0">Danh Sách Phiếu Đổi Trả</h3>
                        <a class="btn btn-primary btn-add-khoi" asp-controller="Them" asp-action="ThemPhieuDoiTra">
                            <i class="fas fa-plus"></i> Tạo phiếu mới
                        </a>
                    </div>

                    <div class="tile-body">
                        <div class="table-responsive">
                            <table class="table table-hover table-bordered" id="sampleTable">
                                <thead>
                                    <tr>
                                        <th>Mã Phiếu</th>
                                        <th>Hóa Đơn Gốc</th>
                                        <th>Ngày Đổi Trả</th>
                                        <th class="text-end">Tổng Hoàn</th>
                                        <th class="text-center">Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>PDT001</td>
                                        <td>HD003</td>
                                        <td>01/11/2025</td>
                                        <td class="text-end">12,000 đ</td>
                                        <td class="text-center">
                                            <button class="btn btn-info btn-sm js-view-detail" data-id="PDT001" title="Xem chi tiết">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                   
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="section-detail" class="d-none">
        <div class="row">
            <div class="col-md-12">
                <div class="tile">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="tile-title mb-0">Chi Tiết Phiếu Đổi Trả: <span id="detail-id" class="text-primary">#---</span></h3>
                        <button class="btn btn-secondary" id="btn-back-list">
                            <i class="bi bi-arrow-left me-2"></i>Quay lại
                        </button>
                    </div>
                    <hr>
                    <div class="tile-body">
                        <div class="row mb-4 p-3 bg-light border rounded mx-1">
                            <div class="col-md-4">
                                <label class="small text-muted">Hóa đơn gốc:</label>
                                <div id="detail-hoaDonId" class="fw-bold fs-5">---</div>
                            </div>
                            <div class="col-md-4">
                                <label class="small text-muted">Ngày đổi trả:</label>
                                <div id="detail-ngayDoiTra" class="fw-bold fs-5">---</div>
                            </div>
                            <div class="col-md-4">
                                <label class="small text-muted">Chính sách áp dụng:</label>
                                <div id="detail-chinhSachId" class="fw-bold fs-5 text-info">---</div>
                            </div>
                        </div>

                        <h5 class="tile-title mt-4"><i class="bi bi-list-check me-2"></i>Danh sách sản phẩm hoàn trả</h5>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover align-middle">
                                <thead class="table-primary">
                                    <tr>
                                        <th>#</th>
                                        <th>Sản phẩm</th>
                                        <th>Lý do</th>
                                        <th class="text-end">Số tiền hoàn</th>
                                    </tr>
                                </thead>
                                <tbody id="detail-tbody">
                                </tbody>
                                <tfoot>
                                    <tr class="bg-white">
                                        <td colspan="3" class="text-end fw-bold pt-3">Tổng tiền hoàn lại:</td>
                                        <td class="text-end fw-bold text-danger fs-4" id="detail-tong-tien">0 đ</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</main>


<script src="~/assets/js/PhieuDoiTra.js" asp-append-version="true" defer></script>
