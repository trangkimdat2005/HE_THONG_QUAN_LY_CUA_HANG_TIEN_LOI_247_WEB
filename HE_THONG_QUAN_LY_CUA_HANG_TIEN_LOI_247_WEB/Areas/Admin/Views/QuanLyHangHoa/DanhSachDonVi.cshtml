@using HE_THONG_QUAN_LY_CUA_HANG_TIEN_LOI_247_WEB.Models.Entities;

@{
    ViewData["title"] = "Danh Sách Đơn Vị";
}

<link rel="stylesheet" href="~/assets/lib/select2/dist/css/select2.min.css">
<link rel="stylesheet" href="~/assets/css/ThemDonVi.css">

<main class="app-content">
    <div class="app-title">
        <div>
            <h1><i class="bi bi-rulers"></i> Quản lý Đơn vị</h1>
            <p>Quản lý các đơn vị đo lường cho sản phẩm</p>
        </div>
        <ul class="app-breadcrumb breadcrumb side">
            <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
            <li class="breadcrumb-item">Quản lý hàng hoá</li>
            <li class="breadcrumb-item active"><a asp-controller="QuanLyHangHoa" asp-action="DanhSachDonVi">Các đơn vị</a></li>
        </ul>
    </div>

    <div class="row" id="main-row-container">
        <div class="col-md-12" id="list-col">
            <div class="tile">
                <div class="tile-title-w-btn d-flex justify-content-between align-items-center">
                    <h3 class="title" style="margin-bottom: 0">Danh Sách Đơn Vị</h3>
                    <a class="btn btn-primary btn-add-khoi" href="#" id="show-add-form-btn">
                        <i class="fas fa-plus"></i> Thêm đơn vị mới
                    </a>
                </div>

                <div class="tile-body">
                    <div class="table-responsive">
                        <table class="table table-hover table-bordered" id="sampleTable">
                            <thead>
                                <tr>
                                    <th>Mã Đơn Vị</th>
                                    <th>Tên Đơn Vị</th>
                                    <th>Ký Hiệu</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    if (ViewData["lstDonViDoLuong"] != null)
                                    {
                                        List<DonViDoLuong> donVis = ViewData["lstDonViDoLuong"] as List<DonViDoLuong>;
                                        if (donVis != null && donVis.Any())
                                        {
                                            foreach (DonViDoLuong dv in donVis)
                                            {
                                                <tr data-id="@dv.Id" data-ten="@dv.Ten" data-kyhieu="@dv.KyHieu">
                                                    <td>@dv.Id</td>
                                                    <td>@dv.Ten</td>
                                                    <td>@dv.KyHieu</td>
                                                    <td class="text-center">
                                                        <a class="btn btn-info btn-sm me-1 btn-edit-khoi" href="#" 
                                                           data-id="@dv.Id" 
                                                           title="Sửa">
                                                            <i class="fas fa-edit"></i>
                                                        </a>
                                                        <a class="btn btn-danger btn-sm btn-delete-khoi" href="#" 
                                                           data-id="@dv.Id" 
                                                           title="Xóa">
                                                            <i class="fas fa-trash-alt"></i>
                                                        </a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- FORM DÙNG CHUNG CHO THÊM/SỬA/XEM -->
        <div class="col-md-0" id="form-col">
            <div class="tile">
                <div class="tile-title-w-btn d-flex justify-content-between align-items-center">
                    <h3 class="title" id="form-title" style="margin-bottom: 0">Chi Tiết Đơn Vị</h3>
                    <button class="btn btn-sm btn-secondary" id="btn-edit-mode" style="display: none;">
                        <i class="fas fa-edit"></i> Chỉnh sửa
                    </button>
                </div>
                
                <div class="tile-body">
                    <form id="don-vi-form">
                        <div class="mb-3">
                            <label class="form-label">Mã đơn vị</label>
                            <input class="form-control" id="form-don-vi-id" type="text" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tên đơn vị *</label>
                            <input class="form-control" id="form-don-vi-ten" type="text" placeholder="V.d: Hộp" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ký hiệu *</label>
                            <input class="form-control" id="form-don-vi-kyhieu" type="text" placeholder="V.d: hộp" required>
                        </div>
                    </form>
                </div>
                
                <div class="tile-footer">
                    <button class="btn btn-primary" id="btn-submit" type="button">
                        <i class="bi bi-check-circle-fill me-2"></i>Lưu
                    </button>
                    <button class="btn btn-secondary" id="btn-cancel" type="button">
                        <i class="bi bi-x-circle-fill me-2"></i>Hủy
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>

<script src="~/assets/lib/select2/dist/js/select2.min.js" asp-append-version="true" defer></script>
<script src="~/assets/js/DanhSachDonVi.js" asp-append-version="true" defer></script>
